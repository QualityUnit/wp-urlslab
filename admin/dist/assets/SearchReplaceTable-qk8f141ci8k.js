import{r as U,R as t,L as $}from"../main-qk8f141ci8k.js";import{u as v,a as z,b as L,S as P,M as q,c as B,T as H}from"./useTableUpdater-qk8f141ci8k.js";import{C as O,I as o,S as E}from"./datepicker-qk8f141ci8k.js";import"./useMutation-qk8f141ci8k.js";function J({slug:l}){var C;const s="id",{table:y,setTable:b,rowToInsert:i,setInsertRow:u,filters:h,setFilters:R,sortingColumn:f,sortBy:T}=v({slug:l}),p=U.useMemo(()=>`${h}${f}`,[h,f]),{__:c,columnHelper:n,data:m,status:V,isSuccess:x,isFetchingNextPage:I,hasNextPage:w,ref:S}=z({key:l,url:p,pageId:s}),{row:g,selectRow:N,deleteRow:k,updateRow:d}=L({data:m,url:p,slug:l,pageId:s}),_={T:c("Plain Text"),R:c("Regular Expr.")},a={str_search:c("Search string"),str_replace:c("Replace string"),search_type:c("Search Type"),url_filter:"URL Filter"},F={str_search:t.createElement(o,{liveUpdate:!0,type:"url",defaultValue:"",label:a.str_search,onChange:e=>u({...i,str_search:e}),required:!0}),str_replace:t.createElement(o,{liveUpdate:!0,type:"url",defaultValue:"",label:a.str_replace,onChange:e=>u({...i,str_replace:e}),required:!0}),search_type:t.createElement(E,{autoClose:!0,items:_,name:"search_type",checkedId:"T",onChange:e=>u({...i,search_type:e})},a.search_type),url_filter:t.createElement(o,{liveUpdate:!0,defaultValue:"",label:a.url_filter,onChange:e=>u({...i,url_filter:e})})},M=[n.accessor("check",{className:"nolimit checkbox",cell:e=>t.createElement(O,{checked:e.row.getIsSelected(),onChange:r=>{N(r,e)}}),header:null}),n.accessor("str_search",{className:"nolimit",cell:e=>t.createElement(o,{type:"text",defaultValue:e.getValue(),onChange:r=>d({newVal:r,cell:e})}),header:a.str_search,size:300}),n.accessor("str_replace",{className:"nolimit",cell:e=>t.createElement(o,{type:"text",defaultValue:e.getValue(),onChange:r=>d({newVal:r,cell:e})}),header:a.str_replace,size:300}),n.accessor("search_type",{filterValMenu:_,className:"nolimit",cell:e=>t.createElement(E,{items:_,name:e.column.id,checkedId:e.getValue(),onChange:r=>d({newVal:r,cell:e})}),header:a.search_type,size:100}),n.accessor("url_filter",{className:"nolimit",cell:e=>t.createElement(o,{type:"text",defaultValue:e.getValue(),onChange:r=>d({newVal:r,cell:e})}),header:a.url_filter,size:100}),n.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(P,{onClick:()=>k({cell:e})}),header:()=>null})];return V==="loading"?t.createElement($,null):t.createElement(t.Fragment,null,t.createElement(q,{slug:l,header:a,table:y,onSort:e=>T(e),onFilter:e=>R(e),onClearRow:e=>e&&u(),insertOptions:{inserterCells:F,title:"Add replacement",data:m,slug:l,url:p,pageId:s,rowToInsert:i},exportOptions:{url:l,filters:h,fromId:`from_${s}`,pageId:s,deleteCSVCols:[s,"dest_url_id"]}}),t.createElement(B,{className:"fadeInto",slug:l,returnTable:e=>b(e),columns:M,data:x&&((C=m==null?void 0:m.pages)==null?void 0:C.flatMap(e=>e??[]))},g?t.createElement(H,{center:!0},`${a.str_search} “${g.str_search}”`," ",c("has been deleted.")):null,t.createElement("button",{ref:S},I?"Loading more...":w)))}export{J as default};
