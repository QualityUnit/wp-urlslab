import{r as R,R as t,L as M}from"../main.js";import{u as $,a as v,h as P,T as m,S as U,M as B,b as D}from"./useTableUpdater-93621fab.js";import{C as A,I as h,S as p}from"./datepicker-9d5f36ac.js";import"./useMutation-157cd200.js";function G({slug:o}){var E;const{table:S,setTable:V,filters:d,setFilters:b,currentFilters:f,sortingColumn:_,sortBy:y,row:g,deleteRow:w,updateRow:u}=$({slug:o}),c=R.useMemo(()=>`${d}${_||"&sort_column=url_name&sort_direction=ASC"}`,[d,_]),n="url_id",{__:a,columnHelper:r,data:s,status:C,isSuccess:I,isFetchingNextPage:T,hasNextPage:N,ref:k}=v({key:o,url:c,pageId:n,currentFilters:f,sortingColumn:_}),x={"-2":a("Processing"),"-1":a("Waiting"),200:a("Valid"),400:a("Client Error"),404:a("Not Found"),500:a("Server Error"),503:a("Server Error")},z={V:a("Visible"),H:a("Hidden")},F={I:a("Internal"),E:a("External")},i={url_name:a("URL"),url_title:a("Title"),url_meta_description:a("Description"),url_summary:a("Summary"),http_status:a("Status"),visibility:a("Visibility"),url_type:a("URL Type"),update_http_date:a("Status Updated")},L=[r.accessor("check",{className:"checkbox",cell:e=>t.createElement(A,{checked:e.row.getIsSelected(),onChange:l=>{P(l,e)}}),header:null}),r.accessor("url_name",{tooltip:e=>t.createElement(m,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),title:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:i.url_name,size:200}),r.accessor("url_title",{className:"nolimit",tooltip:e=>t.createElement(m,null,e.getValue()),cell:e=>t.createElement(h,{defaultValue:e.getValue(),onChange:l=>u({data:s,newVal:l,url:c,slug:o,cell:e,rowSelector:n})}),header:i.url_title,size:150}),r==null?void 0:r.accessor("url_meta_description",{className:"nolimit",tooltip:e=>t.createElement(m,null,e.getValue()),cell:e=>t.createElement(h,{defaultValue:e.getValue(),onChange:l=>u({data:s,newVal:l,url:c,slug:o,cell:e,rowSelector:n})}),header:i.url_meta_description,size:100}),r.accessor("url_summary",{className:"nolimit",tooltip:e=>t.createElement(m,null,e.getValue()),cell:e=>t.createElement(h,{defaultValue:e.getValue(),onChange:l=>u({data:s,newVal:l,url:c,slug:o,cell:e,rowSelector:n})}),header:i.url_summary,size:150}),r==null?void 0:r.accessor("http_status",{className:"nolimit",cell:e=>t.createElement(p,{items:x,name:e.column.id,checkedId:e.getValue(),onChange:l=>u({data:s,newVal:l,url:c,slug:o,cell:e,rowSelector:n})}),header:i.http_status,size:100}),r.accessor("visibility",{className:"nolimit",cell:e=>t.createElement(p,{items:z,name:e.column.id,checkedId:e.getValue(),onChange:l=>u({data:s,newVal:l,url:c,slug:o,cell:e,rowSelector:n})}),header:i.visibility,size:100}),r.accessor("url_type",{className:"nolimit",cell:e=>t.createElement(p,{items:F,name:e.column.id,checkedId:e.getValue(),onChange:l=>u({data:s,newVal:l,url:c,slug:o,cell:e,rowSelector:n})}),header:i.url_type,size:100}),r.accessor("update_http_date",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:()=>i.update_http_date,size:140}),r.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(U,{onClick:()=>w({data:s,url:c,slug:o,cell:e,rowSelector:n})}),header:null})];return C==="loading"?t.createElement(M,null):t.createElement(t.Fragment,null,t.createElement(B,{slug:o,header:i,table:S,onSort:e=>y(e),onFilter:e=>b(e),noImport:!0,exportOptions:{url:o,filters:d,fromId:`from_${n}`,pageId:n,deleteCSVCols:["urlslab_url_id","url_id","urlslab_domain_id"],perPage:1e3}}),t.createElement(D,{className:"fadeInto",slug:o,returnTable:e=>V(e),columns:L,data:I&&((E=s==null?void 0:s.pages)==null?void 0:E.flatMap(e=>e??[]))},g?t.createElement(m,{center:!0},`${i.url_name} “${g.url_name}”`," has been deleted."):null,t.createElement("button",{ref:k},T?"Loading more...":N)))}export{G as default};
