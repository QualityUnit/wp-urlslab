import{r as I,R as a,L as M}from"../main-qk8f141ci8k.js";import{u as F,a as V,b as L,T as f,S as $,M as P,c as y}from"./useTableUpdater-qk8f141ci8k.js";import{C as B,S as D}from"./datepicker-qk8f141ci8k.js";import"./useMutation-qk8f141ci8k.js";function G({slug:n}){var g;const l="url_id",{table:b,setTable:w,filters:i,setFilters:E,sortingColumn:u,sortBy:S}=F({slug:n}),d=I.useMemo(()=>`${i}${u}`,[i,u]),{__:s,columnHelper:t,data:o,status:p,isSuccess:C,isFetchingNextPage:T,hasNextPage:k,ref:z}=V({key:n,url:d,pageId:l}),{row:m,selectRow:N,deleteRow:R,updateRow:_}=L({data:o,url:d,slug:n,pageId:l}),h={N:s("New"),A:s("Available"),P:s("Processing"),D:s("Disabled")},r={url:s("URL"),status:s("Status"),status_changed:s("Status changed"),filesize:s("Filesize")},x=[t.accessor("check",{className:"checkbox",cell:e=>a.createElement(B,{checked:e.row.getIsSelected(),onChange:c=>{N(c,e)}}),header:null}),t==null?void 0:t.accessor("url",{tooltip:e=>a.createElement(f,null,e.getValue()),header:r.url,size:450}),t==null?void 0:t.accessor("status",{filterValMenu:h,className:"nolimit",cell:e=>a.createElement(D,{items:h,name:e.column.id,checkedId:e.getValue(),onChange:c=>_({newVal:c,cell:e})}),header:r.status,size:100}),t==null?void 0:t.accessor("status_changed",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:r.status_changed,size:100}),t==null?void 0:t.accessor("filesize",{cell:e=>`${Math.round(e.getValue()/1024,0)} kB`,header:r.filesize,size:100}),t.accessor("delete",{className:"deleteRow",cell:e=>a.createElement($,{onClick:()=>R({cell:e})}),header:null})];return p==="loading"?a.createElement(M,null):a.createElement(a.Fragment,null,a.createElement(P,{slug:n,header:r,table:b,noExport:!0,noImport:!0,onSort:e=>S(e),onFilter:e=>E(e)}),a.createElement(y,{className:"fadeInto",columns:x,slug:n,returnTable:e=>w(e),data:C&&((g=o==null?void 0:o.pages)==null?void 0:g.flatMap(e=>e??[]))},m?a.createElement(f,{center:!0},`${r.url_name} “${m.url_name}”`," ",s("has been deleted.")):null,a.createElement("button",{ref:z},T?"Loading more...":k)))}export{G as default};
