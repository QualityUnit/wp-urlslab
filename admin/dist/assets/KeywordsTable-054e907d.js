import{a as M,r as b,R as t,L as R}from"../main.js";import{u as x,a as $,h as U,T as y,S as P,M as q,b as B}from"./useTableUpdater-996b53f6.js";import{S as C,I as f,C as H}from"./datepicker-9d5f36ac.js";import"./useMutation-157cd200.js";function K({noAll:a,isFilter:p,children:_,onChange:d,checkedId:h}){const i=M().getQueryData(["languages"]),k=b.useMemo(()=>(a&&delete i.all,i),[i,a]),g=u=>{d&&d(u)};return k?t.createElement(C,{items:k,isFilter:p,name:"languages",checkedId:h,onChange:u=>g(u)},_):t.createElement(f,{defaultValue:h,onChange:u=>g(u)})}function X({slug:a}){var S;const{table:p,setTable:_,filters:d,setFilters:h,currentFilters:E,sortingColumn:i,sortBy:k,row:g,deleteRow:u,updateRow:w}=x({slug:a}),m=b.useMemo(()=>`${d}${i}`,[d,i]),o="kw_id",{__:r,columnHelper:n,data:c,status:T,isSuccess:V,isFetchingNextPage:L,hasNextPage:z,ref:F}=$({key:a,url:m,pageId:o,currentFilters:E,sortingColumn:i}),I={M:r("Manual"),I:r("Imported"),X:r("None")},l={keyword:r("Keyword"),kwType:r("Type"),kw_length:r("Length"),kw_priority:r("Priority"),kw_usage_count:r("Usage"),lang:r("Language"),link_usage_count:r("Link Usage"),urlFilter:r("URL Filter"),urlLink:r("Link")},N=[n.accessor("check",{className:"checkbox",cell:e=>t.createElement(H,{checked:e.row.getIsSelected(),onChange:s=>{U(s,e)}}),header:null,enableResizing:!1}),n.accessor("keyword",{tooltip:e=>t.createElement(y,null,e.getValue()),header:l.keyword,minSize:150}),n.accessor("kwType",{className:"nolimit",cell:e=>t.createElement(C,{items:I,name:e.column.id,checkedId:e.getValue(),onChange:s=>w({data:c,newVal:s,url:m,slug:a,cell:e,rowSelector:o})}),header:l.kwType,size:100}),n.accessor("kw_length",{header:l.kw_length,size:80}),n.accessor("kw_priority",{className:"nolimit",cell:e=>t.createElement(f,{type:"number",defaultValue:e.getValue(),onChange:s=>w({data:c,newVal:s,url:m,slug:a,cell:e,rowSelector:o})}),header:l.kw_priority,size:80}),n.accessor("lang",{className:"nolimit",cell:e=>t.createElement(K,{noAll:!0,checkedId:e==null?void 0:e.getValue(),onChange:s=>w({data:c,newVal:s,url:m,slug:a,cell:e,rowSelector:o})}),header:l.lang,size:165}),n.accessor("kw_usage_count",{header:l.kw_usage_count,size:70}),n.accessor("link_usage_count",{header:l.link_usage_count,size:100}),n.accessor("urlFilter",{className:"nolimit",cell:e=>t.createElement(f,{defaultValue:e.renderValue(),onChange:s=>w({data:c,newVal:s,url:m,slug:a,cell:e,rowSelector:o})}),header:l.urlFilter,size:100}),n.accessor("urlLink",{tooltip:e=>t.createElement(y,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:l.urlLink,enableResizing:!1,size:350}),n.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(P,{onClick:()=>u({data:c,url:m,slug:a,cell:e,rowSelector:o})}),header:null})];return T==="loading"?t.createElement(R,null):t.createElement(t.Fragment,null,t.createElement(q,{slug:a,header:l,table:p,onSort:e=>k(e),onFilter:e=>h(e),exportOptions:{url:a,filters:d,fromId:`from_${o}`,pageId:o,deleteCSVCols:[o,"dest_url_id"]}}),t.createElement(B,{className:"fadeInto",slug:a,returnTable:e=>_(e),columns:N,data:V&&((S=c==null?void 0:c.pages)==null?void 0:S.flatMap(e=>e??[]))},g?t.createElement(y,{center:!0},`${l.keyword} “${g.keyword}”`," ",r("has been deleted.")):null,t.createElement("button",{ref:F},L?"Loading more...":z)))}export{X as default};
