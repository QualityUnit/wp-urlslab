import{r as $,R as t,L as z}from"../main.js";import{u as L,a as P,h as B,S as H,M as U,b as v,T as O}from"./useTableUpdater-d1cf60b0.js";import{C as j,I as m,S}from"./datepicker-a249e83b.js";import"./useMutation-2de0e287.js";function J({slug:r}){var g;const{table:C,setTable:y,filters:p,setFilters:T,currentFilters:w,sortingColumn:_,sortBy:x,row:f,rowToInsert:h,setInsertRow:u,deleteRow:I,updateRow:d}=L({slug:r}),c=$.useMemo(()=>`${p}${_}`,[p,_]),a="id",{__:n,columnHelper:o,data:l,status:V,isSuccess:b,isFetchingNextPage:R,hasNextPage:N,ref:k}=P({key:r,url:c,pageId:a,currentFilters:w,sortingColumn:_}),E={T:n("Plain Text"),R:n("Regular Expr.")},i={str_search:n("Search string"),str_replace:n("Replace string"),search_type:n("Search Type"),url_filter:"URL Filter"},F={str_search:t.createElement(m,{type:"url",defaultValue:"",onChange:e=>u({...h,str_search:e})}),str_replace:t.createElement(m,{type:"url",defaultValue:"",onChange:e=>u({...h,str_replace:e})}),search_type:t.createElement(S,{items:E,name:"search_type",checkedId:"T",onChange:e=>u({...h,search_type:e})}),url_filter:t.createElement(m,{defaultValue:".*",onChange:e=>u({...h,url_filter:e})})},M=[o.accessor("check",{className:"nolimit checkbox",cell:e=>t.createElement(j,{checked:e.row.getIsSelected(),onChange:s=>{B(s,e)}}),header:null}),o.accessor("str_search",{className:"nolimit",cell:e=>t.createElement(m,{type:"text",defaultValue:e.getValue(),onChange:s=>d({data:l,newVal:s,url:c,slug:r,cell:e,rowSelector:a})}),header:i.str_search,size:300}),o.accessor("str_replace",{className:"nolimit",cell:e=>t.createElement(m,{type:"text",defaultValue:e.getValue(),onChange:s=>d({data:l,newVal:s,url:c,slug:r,cell:e,rowSelector:a})}),header:i.str_replace,size:300}),o.accessor("search_type",{className:"nolimit",cell:e=>t.createElement(S,{items:E,name:e.column.id,checkedId:e.getValue(),onChange:s=>d({data:l,newVal:s,url:c,slug:r,cell:e,rowSelector:a})}),header:i.search_type,size:100}),o.accessor("url_filter",{className:"nolimit",cell:e=>t.createElement(m,{type:"text",defaultValue:e.getValue(),onChange:s=>d({data:l,newVal:s,url:c,slug:r,cell:e,rowSelector:a})}),header:i.url_filter,size:100}),o.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(H,{onClick:()=>I({data:l,url:c,slug:r,cell:e,rowSelector:a})}),header:()=>null})];return V==="loading"?t.createElement(z,null):t.createElement(t.Fragment,null,t.createElement(U,{slug:r,header:i,table:C,onSort:e=>x(e),onFilter:e=>T(e),exportOptions:{url:r,filters:p,fromId:`from_${a}`,pageId:a,deleteCSVCols:[a,"dest_url_id"]}}),t.createElement(v,{className:"fadeInto",slug:r,returnTable:e=>y(e),columns:M,data:b&&((g=l==null?void 0:l.pages)==null?void 0:g.flatMap(e=>e??[])),inserter:{inserterCells:F,data:l,slug:r,url:c,rowToInsert:h}},f?t.createElement(O,{center:!0},`${i.str_search} “${f.str_search}”`," ",n("has been deleted.")):null,t.createElement("button",{ref:k},R?"Loading more...":N)))}export{J as default};
