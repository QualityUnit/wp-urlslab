import{r as M,R as t,L as S}from"../main-qk8f141ci8k.js";import{u as q,a as F,b as L,S as N,M as $,c as P,T as B}from"./useTableUpdater-qk8f141ci8k.js";import{C as b,I as c,S as H}from"./datepicker-qk8f141ci8k.js";import"./useMutation-qk8f141ci8k.js";function G({slug:i}){var f;const n="redirect_id",{table:g,setTable:C,rowToInsert:s,setInsertRow:o,filters:u,setFilters:E,sortingColumn:h,sortBy:w}=q({slug:i}),m=M.useMemo(()=>`${u}${h}`,[u,h]),{__:l,columnHelper:r,data:d,status:R,isSuccess:y,isFetchingNextPage:k,hasNextPage:z,ref:T}=F({key:i,url:m,pageId:n}),{row:p,selectRow:U,deleteRow:V}=L({data:d,url:m,slug:i,pageId:n}),_={301:"Moved Permanently (301)",307:"Temporary Redirect (307)"},a={match_type:l("Match type"),match_url:l("URL"),replace_url:l("Redirect to URL"),redirect_code:l("HTTP Code"),is_logged:l("Is Logged in"),capabilities:l("Capabilities"),roles:l("Roles"),browser:l("Browser"),cookie:l("Cookies"),headers:l("Request headers"),params:l("Request parameters"),if_not_found:l("Execute if 404"),cnt:l("Redirects Count")},v={match_type:t.createElement(c,{type:"url",liveUpdate:!0,defaultValue:"",label:a.match_type,onChange:e=>o({...s,match_type:e}),required:!0}),match_url:t.createElement(c,{type:"url",liveUpdate:!0,defaultValue:"",label:a.match_url,onChange:e=>o({...s,match_url:e}),required:!0}),replace_url:t.createElement(c,{type:"url",liveUpdate:!0,defaultValue:"",label:a.replace_url,onChange:e=>o({...s,replace_url:e}),required:!0}),redirect_code:t.createElement(H,{autoClose:!0,items:_,name:"redirect_code",checkedId:"301",onChange:e=>o({...s,redirect_code:e}),required:!0},a.redirect_code),is_logged:t.createElement(b,{onChange:e=>o({...s,is_logged:e})},a.is_logged),headers:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.headers,onChange:e=>o({...s,headers:e})}),cookie:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.cookie,onChange:e=>o({...s,cookie:e})}),params:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.params,onChange:e=>o({...s,capabilities:e})}),capabilities:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.capabilities,onChange:e=>o({...s,capabilities:e})}),roles:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.roles,onChange:e=>o({...s,roles:e})}),browser:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.browser,onChange:e=>o({...s,browser:e})}),if_not_found:t.createElement(c,{liveUpdate:!0,defaultValue:"",label:a.if_not_found,onChange:e=>o({...s,if_not_found:e})})},I=[r.accessor("check",{className:"checkbox",cell:e=>t.createElement(b,{checked:e.row.getIsSelected(),onChange:x=>{U(x,e)}}),header:null}),r.accessor("match_type",{header:a.match_type,size:80}),r.accessor("match_url",{header:a.match_url,size:200}),r.accessor("replace_url",{header:a.replace_url,size:100}),r.accessor("redirect_code",{filterValMenu:_,className:"nolimit",header:a.redirect_code,size:100}),r.accessor("is_logged",{header:a.is_logged,size:100}),r.accessor("capabilities",{header:a.capabilities,size:100}),r.accessor("roles",{header:a.roles,size:100}),r.accessor("browser",{header:a.browser,size:100}),r.accessor("cookie",{header:a.cookie,size:100}),r.accessor("headers",{header:a.headers,size:100}),r.accessor("params",{header:a.params,size:100}),r.accessor("if_not_found",{header:a.if_not_found,size:100}),r.accessor("cnt",{header:a.cnt,size:100}),r.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(N,{onClick:()=>V({cell:e})}),header:()=>null})];return R==="loading"?t.createElement(S,null):t.createElement(t.Fragment,null,t.createElement($,{slug:i,header:a,table:g,onSort:e=>w(e),onFilter:e=>E(e),insertOptions:{inserterCells:v,title:"Add redirect",data:d,slug:i,url:m,pageId:n,rowToInsert:s},exportOptions:{url:i,filters:u,fromId:`from_${n}`,pageId:n,deleteCSVCols:[n]}}),t.createElement(P,{className:"fadeInto",slug:i,returnTable:e=>C(e),columns:I,data:y&&((f=d==null?void 0:d.pages)==null?void 0:f.flatMap(e=>e??[]))},p?t.createElement(B,{center:!0},`${a.str_search} “${p.str_search}”`," ",l("has been deleted.")):null,t.createElement("button",{ref:T},k?"Loading more...":z)))}export{G as default};
