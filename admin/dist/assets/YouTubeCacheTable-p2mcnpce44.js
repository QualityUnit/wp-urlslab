import{r as F,R as s,L as P}from"../main-p2mcnpce44.js";import{u as y,a as z,b as M,T as b,S as L,M as O,c as A}from"./useTableUpdater-p2mcnpce44.js";import{C as B}from"./datepicker-p2mcnpce44.js";import"./useMutation-p2mcnpce44.js";function q({slug:i}){var E;const c="videoid",{table:T,setTable:N,filters:h,setFilters:V,sortingColumn:m,sortBy:w}=y({slug:i}),p=F.useMemo(()=>`${h}${m}`,[h,m]),{__:o,columnHelper:t,data:l,status:C,isSuccess:S,isFetchingNextPage:g,hasNextPage:I,ref:$}=z({key:i,url:p,pageId:c}),{row:f,selectRow:k,deleteRow:x,updateRow:D}=M({data:l,url:p,slug:i,pageId:c}),R={N:o("New"),A:o("Available"),P:o("Processing"),D:o("Disabled")},d={thumb:o("Thumbnail"),videoid:o("YouTube Id"),status:o("Status"),title:o("Title"),published:o("Published")},_=[t.accessor("check",{className:"checkbox",cell:e=>s.createElement(B,{checked:e.row.getIsSelected(),onChange:a=>{k(a,e)}}),header:null}),t==null?void 0:t.accessor(e=>{var a,r;return(r=(a=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:a.items[0])==null?void 0:r.snippet},{id:"thumb",className:"thumbnail",tooltip:e=>{var a,r,n,u;return s.createElement(b,null,s.createElement("img",{src:(n=(r=(a=e.getValue())==null?void 0:a.thumbnails)==null?void 0:r.high)==null?void 0:n.url,alt:(u=e==null?void 0:e.getValue())==null?void 0:u.title}))},cell:e=>{var a,r,n,u;return s.createElement("img",{src:(n=(r=(a=e==null?void 0:e.getValue())==null?void 0:a.thumbnails)==null?void 0:r.high)==null?void 0:n.url,alt:(u=e==null?void 0:e.getValue())==null?void 0:u.title})},header:d.thumb,size:80}),t==null?void 0:t.accessor("videoid",{header:d.videoid,size:80}),t==null?void 0:t.accessor("status",{cell:e=>R[e.getValue()],header:d.status,size:100}),t==null?void 0:t.accessor(e=>{var a,r,n;return[e==null?void 0:e.videoid,(n=(r=(a=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:a.items[0])==null?void 0:r.snippet)==null?void 0:n.title]},{id:"title",tooltip:e=>s.createElement(b,null,e.getValue()[1]),cell:e=>s.createElement("a",{href:`https://youtu.be/${e==null?void 0:e.getValue()[0]}`,target:"_blank",rel:"noreferrer"},e==null?void 0:e.getValue()[1]),header:d.title,size:450}),t.accessor("delete",{className:"deleteRow",cell:e=>s.createElement(L,{onClick:()=>x({cell:e})}),header:null})];return C==="loading"?s.createElement(P,null):s.createElement(s.Fragment,null,s.createElement(O,{slug:i,header:d,table:T,noImport:!0,onSort:e=>w(e),onFilter:e=>V(e),exportOptions:{url:i,filters:h,fromId:`from_${c}`,pageId:c,deleteCSVCols:[c,"dest_url_id"]}}),s.createElement(A,{className:"fadeInto",slug:i,returnTable:e=>N(e),columns:_,data:S&&((E=l==null?void 0:l.pages)==null?void 0:E.flatMap(e=>e??[]))},f?s.createElement(b,{center:!0},`${d.videoid} “${f.videoid}”`," ",o("has been deleted.")):null,s.createElement("button",{ref:$},g?"Loading more...":I)))}export{q as default};
