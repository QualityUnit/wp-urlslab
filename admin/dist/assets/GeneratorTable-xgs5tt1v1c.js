import{r as F,R as t,l as k,L as y}from"../main-xgs5tt1v1c.js";import{u as z,a as L,b as M,T as l,S as q,M as $,c as B}from"./useTableUpdater-xgs5tt1v1c.js";import{C as H,I as P}from"./datepicker-xgs5tt1v1c.js";import"./useMutation-xgs5tt1v1c.js";function U({slug:o}){var g;const n="generator_id",{table:h,setTable:p,filters:u,setFilters:E,currentFilters:f,sortingColumn:i,sortBy:w}=z({slug:o}),m=F.useMemo(()=>`${u}${i}`,[u,i]),{__:s,columnHelper:a,data:c,status:b,isSuccess:x,isFetchingNextPage:C,hasNextPage:V,ref:I}=L({key:o,url:m,pageId:n,currentFilters:f,sortingColumn:i}),{row:R,selectRow:N,deleteRow:S,updateRow:T}=M({data:c,url:m,slug:o,pageId:n}),r={query:s("Query"),context:s("Context"),lang:s("Language code"),status:s("Status"),status_changed:s("Changed at"),results:s("Results")},_=[a.accessor("check",{className:"checkbox",cell:e=>t.createElement(H,{checked:e.row.getIsSelected(),onChange:d=>{N(d,e)}}),header:null}),a.accessor("query",{tooltip:e=>t.createElement(l,null,e.getValue()),header:r.query,size:200}),a.accessor("context",{tooltip:e=>t.createElement(l,null,e.getValue()),header:r.context,size:200}),a.accessor("lang",{tooltip:e=>t.createElement(l,null,e.getValue()),cell:e=>k(e==null?void 0:e.getValue()),header:r.lang,size:165}),a.accessor("results",{className:"nolimit",tooltip:e=>t.createElement(l,null,e.getValue()),cell:e=>t.createElement(P,{defaultValue:e.getValue(),onChange:d=>T({newVal:d,cell:e})}),header:r.results,size:200}),a.accessor("status",{className:"status",tooltip:e=>t.createElement(l,null,e.getValue()),header:r.status,size:100}),a.accessor("status_changed",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:r.status_changed,size:100}),a.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(q,{onClick:()=>S({cell:e})}),header:null})];return b==="loading"?t.createElement(y,null):t.createElement(t.Fragment,null,t.createElement($,{slug:o,header:r,table:h,noImport:!0,onSort:e=>w(e),onFilter:e=>E(e),exportOptions:{url:o,filters:u,fromId:`from_${n}`,pageId:n,deleteCSVCols:[n,"generator_id"]}}),t.createElement(B,{className:"fadeInto",slug:o,columns:_,returnTable:e=>p(e),data:x&&((g=c==null?void 0:c.pages)==null?void 0:g.flatMap(e=>e??[]))},R?t.createElement(l,{center:!0},s("Row has been deleted.")):null,t.createElement("button",{ref:I},C?"Loading more...":V)))}export{U as default};
