import{a as I,l as M,R as a,r as R,L as x}from"../main.js";import{u as $,a as Q,h as U,T as y,S as D,M as O,b as P}from"./useTableUpdater-d1cf60b0.js";import{S,I as E,C as j}from"./datepicker-a249e83b.js";import"./useMutation-2de0e287.js";function v({noAll:r,isFilter:f,children:_,onChange:g,checkedId:d}){const h=I(),c=h.getQueryData(["languages"]),w=n=>Object.fromEntries(Object.entries(n).sort(([,u],[,l])=>u.localeCompare(l)));r&&delete c.all,c[d]||(c[d]=M(d),h.setQueryData(["languages"],w(c)),h.invalidateQueries(["languages"]));const k=w(c),p=n=>{g&&g(n)};return k?a.createElement(S,{items:k,isFilter:f,name:"languages",checkedId:d,onChange:n=>p(n)},_):a.createElement(E,{defaultValue:d,onChange:n=>p(n)})}function X({slug:r}){var b;const{table:f,setTable:_,filters:g,setFilters:d,currentFilters:h,sortingColumn:c,sortBy:w,row:k,deleteRow:p,updateRow:n}=$({slug:r}),u=R.useMemo(()=>`${g}${c}`,[g,c]),l="kw_id",{__:t,columnHelper:o,data:m,status:C,isSuccess:L,isFetchingNextPage:T,hasNextPage:V,ref:z}=Q({key:r,url:u,pageId:l,currentFilters:h,sortingColumn:c}),F={M:t("Manual"),I:t("Imported"),X:t("None")},s={keyword:t("Keyword"),kwType:t("Type"),kw_length:t("Length"),kw_priority:t("Priority"),kw_usage_count:t("Usage"),lang:t("Language"),link_usage_count:t("Link Usage"),urlFilter:t("URL Filter"),urlLink:t("Link")},N=[o.accessor("check",{className:"checkbox",cell:e=>a.createElement(j,{checked:e.row.getIsSelected(),onChange:i=>{U(i,e)}}),header:null,enableResizing:!1}),o.accessor("keyword",{tooltip:e=>a.createElement(y,null,e.getValue()),header:s.keyword,minSize:150}),o.accessor("kwType",{className:"nolimit",cell:e=>a.createElement(S,{items:F,name:e.column.id,checkedId:e.getValue(),onChange:i=>n({data:m,newVal:i,url:u,slug:r,cell:e,rowSelector:l})}),header:s.kwType,size:100}),o.accessor("kw_length",{header:s.kw_length,size:80}),o.accessor("kw_priority",{className:"nolimit",cell:e=>a.createElement(E,{type:"number",defaultValue:e.getValue(),onChange:i=>n({data:m,newVal:i,url:u,slug:r,cell:e,rowSelector:l})}),header:s.kw_priority,size:80}),o.accessor("lang",{className:"nolimit",cell:e=>a.createElement(v,{checkedId:e==null?void 0:e.getValue(),onChange:i=>n({data:m,newVal:i,url:u,slug:r,cell:e,rowSelector:l})}),header:s.lang,size:165}),o.accessor("kw_usage_count",{header:s.kw_usage_count,size:70}),o.accessor("link_usage_count",{header:s.link_usage_count,size:100}),o.accessor("urlFilter",{className:"nolimit",cell:e=>a.createElement(E,{defaultValue:e.renderValue(),onChange:i=>n({data:m,newVal:i,url:u,slug:r,cell:e,rowSelector:l})}),header:s.urlFilter,size:100}),o.accessor("urlLink",{tooltip:e=>a.createElement(y,null,e.getValue()),cell:e=>a.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:s.urlLink,enableResizing:!1,size:350}),o.accessor("delete",{className:"deleteRow",cell:e=>a.createElement(D,{onClick:()=>p({data:m,url:u,slug:r,cell:e,rowSelector:l})}),header:null})];return C==="loading"?a.createElement(x,null):a.createElement(a.Fragment,null,a.createElement(O,{slug:r,header:s,table:f,onSort:e=>w(e),onFilter:e=>d(e),exportOptions:{url:r,filters:g,fromId:`from_${l}`,pageId:l,deleteCSVCols:[l,"dest_url_id"]}}),a.createElement(P,{className:"fadeInto",slug:r,returnTable:e=>_(e),columns:N,data:L&&((b=m==null?void 0:m.pages)==null?void 0:b.flatMap(e=>e??[]))},k?a.createElement(y,{center:!0},`${s.keyword} “${k.keyword}”`," ",t("has been deleted.")):null,a.createElement("button",{ref:z},T?"Loading more...":V)))}export{X as default};
