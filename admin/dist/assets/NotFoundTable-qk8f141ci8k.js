import{r as F,R as t,L as I}from"../main-qk8f141ci8k.js";import{u as k,a as N,b as z,T as o,S as L,M as $,c as M}from"./useTableUpdater-qk8f141ci8k.js";import{C as q}from"./datepicker-qk8f141ci8k.js";import"./useMutation-qk8f141ci8k.js";function U({slug:l}){var p;const s="url_id",{table:h,setTable:E,filters:i,setFilters:f,sortingColumn:u,sortBy:g}=k({slug:l}),d=F.useMemo(()=>`${i}${u}`,[i,u]),{__:n,columnHelper:a,data:c,status:b,isSuccess:S,isFetchingNextPage:V,hasNextPage:C,ref:_}=N({key:l,url:d,pageId:s}),{row:m,selectRow:w,deleteRow:R}=z({data:c,url:d,slug:l,pageId:s}),r={url:n("URL"),cnt:n("Visits"),created:n("First Visit"),updated:"Last Visit",request_data:"Data"},T=[a.accessor("check",{className:"nolimit checkbox",cell:e=>t.createElement(q,{checked:e.row.getIsSelected(),onChange:x=>{w(x,e)}}),header:null}),a.accessor("url",{tooltip:e=>t.createElement(o,null,e.getValue()),header:r.url,minSize:300}),a.accessor("cnt",{tooltip:e=>t.createElement(o,null,e.getValue()),header:r.cnt,minSize:50}),a.accessor("created",{tooltip:e=>t.createElement(o,null,e.getValue()),header:r.created,minSize:100}),a.accessor("updated",{tooltip:e=>t.createElement(o,null,e.getValue()),header:r.updated,minSize:100}),a.accessor("request_data",{tooltip:e=>t.createElement(o,null,e.getValue()),header:r.request_data,minSize:100}),a.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(L,{onClick:()=>R({cell:e})}),header:null})];return b==="loading"?t.createElement(I,null):t.createElement(t.Fragment,null,t.createElement($,{slug:l,header:r,table:h,onSort:e=>g(e),onFilter:e=>f(e),onClearRow:e=>e,noImport:!0,exportOptions:{url:l,filters:i,fromId:`from_${s}`,pageId:s,deleteCSVCols:[s,"dest_url_id"]}}),t.createElement(M,{className:"fadeInto",slug:l,returnTable:e=>E(e),columns:T,data:S&&((p=c==null?void 0:c.pages)==null?void 0:p.flatMap(e=>e??[]))},m?t.createElement(o,{center:!0},`${r.url} “${m.url}”`," ",n("has been deleted.")):null,t.createElement("button",{ref:_},V?"Loading more...":C)))}export{U as default};
