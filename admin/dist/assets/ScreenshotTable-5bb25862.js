import{r as F,R as t,L as R}from"../main.js";import{u as z,a as L,h as M,T as d,S as P,M as $,b as U}from"./useTableUpdater-93621fab.js";import{C as y,I as A,S as D}from"./datepicker-9d5f36ac.js";import"./useMutation-157cd200.js";function q({slug:l}){var f;const{table:p,setTable:E,filters:i,setFilters:g,currentFilters:_,sortingColumn:m,sortBy:S,row:h,deleteRow:V,updateRow:b}=z({slug:l}),u=F.useMemo(()=>`${i}${m||"&sort_column=url_name&sort_direction=ASC"}`,[i,m]),n="url_id",{__:a,columnHelper:r,data:o,status:w,isSuccess:T,isFetchingNextPage:k,hasNextPage:C,ref:I}=L({key:l,url:u,pageId:n,currentFilters:_,sortingColumn:m}),N={N:a("Waiting"),A:a("Awailable"),P:a("Pending"),E:a("Disabled")},s={screenshot_url:a("Screenshot URL"),url_name:a("Destination URL"),url_title:a("Title"),scr_status:a("Status"),update_scr_date:a("Updated at")},x=[r.accessor("check",{className:"checkbox",cell:e=>t.createElement(y,{checked:e.row.getIsSelected(),onChange:c=>{M(c,e)}}),header:null}),r==null?void 0:r.accessor("screenshot_url",{className:"thumbnail",cell:e=>e!=null&&e.getValue()?t.createElement("a",{href:e==null?void 0:e.getValue(),target:"_blank",rel:"noreferrer"},t.createElement("img",{src:e==null?void 0:e.getValue(),alt:e.row.original.url_name})):t.createElement("div",{className:"img"}),header:a("Thumbnail"),size:90}),r.accessor("url_name",{tooltip:e=>t.createElement(d,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),title:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:s.url_name,size:250}),r.accessor("url_title",{className:"nolimit",tooltip:e=>t.createElement(d,null,e.getValue()),cell:e=>t.createElement(A,{defaultValue:e.getValue(),onChange:c=>b({data:o,newVal:c,url:u,slug:l,cell:e,rowSelector:n})}),header:s.url_title,size:200}),r==null?void 0:r.accessor("scr_status",{className:"nolimit",cell:e=>t.createElement(D,{items:N,name:e.column.id,checkedId:e.getValue(),onChange:c=>b({data:o,newVal:c,url:u,slug:l,cell:e,rowSelector:n})}),header:s.scr_status,size:100}),r==null?void 0:r.accessor("screenshot_url",{tooltip:e=>t.createElement(d,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:s.screenshot_url,size:250}),r.accessor("update_scr_date",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:s.update_scr_date,size:140}),r.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(P,{onClick:()=>V({data:o,url:u,slug:l,cell:e,rowSelector:n})}),header:null})];return w==="loading"?t.createElement(R,null):t.createElement(t.Fragment,null,t.createElement($,{slug:l,currentFilters:_,header:s,table:p,onSort:e=>S(e),onFilter:e=>g(e),noImport:!0,exportOptions:{url:l,filters:i,fromId:`from_${n}`,pageId:n,deleteCSVCols:["urlslab_url_id","url_id","urlslab_domain_id"],perPage:1e3}}),t.createElement(U,{className:"fadeInto",slug:l,returnTable:e=>E(e),columns:x,data:T&&((f=o==null?void 0:o.pages)==null?void 0:f.flatMap(e=>e??[]))},h?t.createElement(d,{center:!0},`${s.url_name} “${h.url_name}”`," has been deleted."):null,t.createElement("button",{ref:I},k?"Loading more...":C)))}export{q as default};
