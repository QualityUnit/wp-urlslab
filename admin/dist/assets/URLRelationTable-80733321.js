import{r as x,R as t,L as F}from"../main.js";import{u as L,a as N,h as U,T as d,S as M,M as y,b as z}from"./useTableUpdater-d1cf60b0.js";import{C as P,I as $}from"./datepicker-a249e83b.js";import"./useMutation-2de0e287.js";function O({slug:r}){var _;const{table:p,setTable:h,filters:c,setFilters:f,currentFilters:g,sortingColumn:u,sortBy:b,row:E,deleteRow:S,updateRow:R}=L({slug:r}),i=x.useMemo(()=>`${c}${u}`,[c,u]),a="src_url_id",{__:n,columnHelper:l,data:o,status:V,isSuccess:k,isFetchingNextPage:w,hasNextPage:C,ref:I}=N({key:r,url:i,pageId:a,currentFilters:g,sortingColumn:u}),s={src_url_id:"",src_url_name:n("Source URL"),dest_url_name:n("Destination URL"),pos:n("Position")},T=[l.accessor("check",{className:"checkbox",cell:e=>t.createElement(P,{checked:e.row.getIsSelected(),onChange:m=>{U(m,e)}}),header:null}),l.accessor("src_url_name",{tooltip:e=>t.createElement(d,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:s.src_url_name,size:400}),l.accessor("dest_url_name",{tooltip:e=>t.createElement(d,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:s.dest_url_name,size:400}),l.accessor("pos",{className:"nolimit",cell:e=>t.createElement($,{type:"number",defaultValue:e.getValue(),onChange:m=>R({data:o,newVal:m,url:i,slug:r,cell:e,rowSelector:a,optionalSelector:"dest_url_id"})}),header:s.pos,size:80}),l.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(M,{onClick:()=>S({data:o,url:i,slug:r,cell:e,rowSelector:a,optionalSelector:"dest_url_id"})}),header:null})];return V==="loading"?t.createElement(F,null):t.createElement(t.Fragment,null,t.createElement(y,{slug:r,header:s,table:p,onSort:e=>b(e),onFilter:e=>f(e),exportOptions:{url:r,filters:c,fromId:`from_${a}`,pageId:a,deleteCSVCols:[a,"dest_url_id"]}}),t.createElement(z,{className:"fadeInto",slug:r,returnTable:e=>h(e),columns:T,data:k&&((_=o==null?void 0:o.pages)==null?void 0:_.flatMap(e=>e??[]))},E?t.createElement(d,{center:!0},n("URL has been deleted.")):null,t.createElement("button",{ref:I},w?"Loading more...":C)))}export{O as default};
