import{r as x,R as t,L as z}from"../main-xgs5tt1v1c.js";import{u as F,a as L,b as M,T as u,S as P,M as $,c as U}from"./useTableUpdater-xgs5tt1v1c.js";import{C as y,I as A,S as D}from"./datepicker-xgs5tt1v1c.js";import"./useMutation-xgs5tt1v1c.js";function q({slug:s}){var g;const o="url_id",{table:b,setTable:f,filters:d,setFilters:p,sortingColumn:i,sortBy:E}=F({slug:s}),m=x.useMemo(()=>`${d}${i||"&sort_column=url_name&sort_direction=ASC"}`,[d,i]),{__:r,columnHelper:a,data:c,status:V,isSuccess:S,isFetchingNextPage:w,hasNextPage:C,ref:T}=L({key:s,url:m,pageId:o}),{row:_,selectRow:k,deleteRow:I,updateRow:h}=M({data:c,url:m,slug:s,pageId:o}),N={N:r("Waiting"),A:r("Awailable"),P:r("Pending"),E:r("Disabled")},l={screenshot_url:r("Screenshot URL"),url_name:r("Destination URL"),url_title:r("Title"),scr_status:r("Status"),update_scr_date:r("Updated at")},R=[a.accessor("check",{className:"checkbox",cell:e=>t.createElement(y,{checked:e.row.getIsSelected(),onChange:n=>{k(n,e)}}),header:null}),a==null?void 0:a.accessor("screenshot_url",{className:"thumbnail",cell:e=>e!=null&&e.getValue()?t.createElement("a",{href:e==null?void 0:e.getValue(),target:"_blank",rel:"noreferrer"},t.createElement("img",{src:e==null?void 0:e.getValue(),alt:e.row.original.url_name})):t.createElement("div",{className:"img"}),header:r("Thumbnail"),size:90}),a.accessor("url_name",{tooltip:e=>t.createElement(u,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),title:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:l.url_name,size:250}),a.accessor("url_title",{className:"nolimit",tooltip:e=>t.createElement(u,null,e.getValue()),cell:e=>t.createElement(A,{defaultValue:e.getValue(),onChange:n=>h({newVal:n,cell:e})}),header:l.url_title,size:200}),a==null?void 0:a.accessor("scr_status",{className:"nolimit",cell:e=>t.createElement(D,{items:N,name:e.column.id,checkedId:e.getValue(),onChange:n=>h({newVal:n,cell:e})}),header:l.scr_status,size:100}),a==null?void 0:a.accessor("screenshot_url",{tooltip:e=>t.createElement(u,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:l.screenshot_url,size:250}),a.accessor("update_scr_date",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:l.update_scr_date,size:140}),a.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(P,{onClick:()=>I({cell:e})}),header:null})];return V==="loading"?t.createElement(z,null):t.createElement(t.Fragment,null,t.createElement($,{slug:s,header:l,table:b,onSort:e=>E(e),onFilter:e=>p(e),noImport:!0,exportOptions:{url:s,filters:d,fromId:`from_${o}`,pageId:o,deleteCSVCols:["urlslab_url_id","url_id","urlslab_domain_id"],perPage:1e3}}),t.createElement(U,{className:"fadeInto",slug:s,returnTable:e=>f(e),columns:R,data:S&&((g=c==null?void 0:c.pages)==null?void 0:g.flatMap(e=>e??[]))},_?t.createElement(u,{center:!0},`${l.url_name} “${_.url_name}”`," has been deleted."):null,t.createElement("button",{ref:T},w?"Loading more...":C)))}export{q as default};
