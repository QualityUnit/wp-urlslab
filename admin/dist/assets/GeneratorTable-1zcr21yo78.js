import{r as T,R as t,l as z,L as k}from"../main-1zcr21yo78.js";import{u as L,a as M,b as $,T as r,S as y,M as B,c as H}from"./useTableUpdater-1zcr21yo78.js";import{C as P,I as U}from"./datepicker-1zcr21yo78.js";import"./useMutation-1zcr21yo78.js";function j({slug:o}){var g;const n="generator_id",{table:h,setTable:p,filters:u,setFilters:f,currentFilters:E,sortingColumn:i,sortBy:_}=L({slug:o}),d=T.useMemo(()=>`${u}${i}`,[u,i]),{__:s,columnHelper:a,data:c,status:w,isSuccess:C,isFetchingNextPage:V,hasNextPage:b,ref:x}=M({key:o,url:d,pageId:n,currentFilters:E,sortingColumn:i}),{row:I,selectRow:R,deleteRow:F,updateRow:N}=$({data:c,url:d,slug:o,pageId:n}),l={command:s("AI Command"),semantic_context:s("Context"),url_filter:s("Url Filter"),lang:s("Language code"),status:s("Status"),status_changed:s("Changed at"),result:s("Result")},S=[a.accessor("check",{className:"checkbox",cell:e=>t.createElement(P,{checked:e.row.getIsSelected(),onChange:m=>{R(m,e)}}),header:null}),a.accessor("command",{tooltip:e=>t.createElement(r,null,e.getValue()),header:l.command,size:200}),a.accessor("semantic_context",{tooltip:e=>t.createElement(r,null,e.getValue()),header:l.semantic_context,size:200}),a.accessor("url_filter",{tooltip:e=>t.createElement(r,null,e.getValue()),header:l.url_filter,size:200}),a.accessor("lang",{tooltip:e=>t.createElement(r,null,e.getValue()),cell:e=>z(e==null?void 0:e.getValue()),header:l.lang,size:165}),a.accessor("result",{className:"nolimit",tooltip:e=>t.createElement(r,null,e.getValue()),cell:e=>t.createElement(U,{defaultValue:e.getValue(),onChange:m=>N({newVal:m,cell:e})}),header:l.result,size:200}),a.accessor("status",{className:"status",tooltip:e=>t.createElement(r,null,e.getValue()),header:l.status,size:100}),a.accessor("status_changed",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:l.status_changed,size:100}),a.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(y,{onClick:()=>F({cell:e})}),header:null})];return w==="loading"?t.createElement(k,null):t.createElement(t.Fragment,null,t.createElement(B,{slug:o,header:l,table:h,noImport:!0,onSort:e=>_(e),onFilter:e=>f(e),exportOptions:{url:o,filters:u,fromId:`from_${n}`,pageId:n,deleteCSVCols:[n,"generator_id"]}}),t.createElement(H,{className:"fadeInto",slug:o,columns:S,returnTable:e=>p(e),data:C&&((g=c==null?void 0:c.pages)==null?void 0:g.flatMap(e=>e??[]))},I?t.createElement(r,{center:!0},s("Row has been deleted.")):null,t.createElement("button",{ref:x},V?"Loading more...":b)))}export{j as default};
