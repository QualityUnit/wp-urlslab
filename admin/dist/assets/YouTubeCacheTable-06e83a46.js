import{r as M,R as a,L as P}from"../main.js";import{u as R,a as y,h as L,T as p,S as O,M as A,b as D}from"./useTableUpdater-93621fab.js";import{C as J,S as B}from"./datepicker-9d5f36ac.js";import"./useMutation-157cd200.js";function G({slug:n}){var f;const{table:E,setTable:T,filters:l,setFilters:g,currentFilters:w,sortingColumn:m,sortBy:N,row:S,deleteRow:V,updateRow:C}=R({slug:n}),b=M.useMemo(()=>`${l}${m}`,[l,m]),c="videoid",{__:i,columnHelper:s,data:u,status:I,isSuccess:$,isFetchingNextPage:k,hasNextPage:x,ref:F}=y({key:n,url:b,pageId:c,currentFilters:w,sortingColumn:m}),_={N:i("New"),A:i("Available"),P:i("Processing"),D:i("Disabled")},d={thumb:i("Thumbnail"),videoid:i("YouTube Id"),status:i("Status"),title:i("Title"),published:i("Published")},z=[s.accessor("check",{className:"checkbox",cell:e=>a.createElement(J,{checked:e.row.getIsSelected(),onChange:t=>{L(t,e)}}),header:null}),s==null?void 0:s.accessor(e=>{var t,r;return(r=(t=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:t.items[0])==null?void 0:r.snippet},{id:"thumb",className:"thumbnail",tooltip:e=>{var t,r,o,h;return a.createElement(p,null,a.createElement("img",{src:(o=(r=(t=e.getValue())==null?void 0:t.thumbnails)==null?void 0:r.high)==null?void 0:o.url,alt:(h=e==null?void 0:e.getValue())==null?void 0:h.title}))},cell:e=>{var t,r,o,h;return a.createElement("img",{src:(o=(r=(t=e==null?void 0:e.getValue())==null?void 0:t.thumbnails)==null?void 0:r.high)==null?void 0:o.url,alt:(h=e==null?void 0:e.getValue())==null?void 0:h.title})},header:d.thumb,size:80}),s==null?void 0:s.accessor("videoid",{header:d.videoid,size:80}),s==null?void 0:s.accessor("status",{className:"nolimit",cell:e=>a.createElement(B,{items:_,name:e.column.id,checkedId:e.getValue(),onChange:t=>C({data:u,newVal:t,url:b,slug:n,cell:e,rowSelector:c})}),header:d.status,size:80}),s==null?void 0:s.accessor(e=>{var t,r,o;return[e==null?void 0:e.videoid,(o=(r=(t=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:t.items[0])==null?void 0:r.snippet)==null?void 0:o.title]},{id:"title",tooltip:e=>a.createElement(p,null,e.getValue()[1]),cell:e=>a.createElement("a",{href:`https://youtu.be/${e==null?void 0:e.getValue()[0]}`,target:"_blank",rel:"noreferrer"},e==null?void 0:e.getValue()[1]),header:d.title,size:450}),s==null?void 0:s.accessor(e=>{var t,r,o;return(o=(r=(t=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:t.items[0])==null?void 0:r.snippet)==null?void 0:o.publishedAt},{id:"published",cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:d.published,size:100}),s.accessor("delete",{className:"deleteRow",cell:e=>a.createElement(O,{onClick:()=>V({data:u,url:b,slug:n,cell:e,rowSelector:c})}),header:null})];return I==="loading"?a.createElement(P,null):a.createElement(a.Fragment,null,a.createElement(A,{slug:n,header:d,table:E,noImport:!0,onSort:e=>N(e),onFilter:e=>g(e),exportOptions:{url:n,filters:l,fromId:`from_${c}`,pageId:c,deleteCSVCols:[c,"dest_url_id"]}}),a.createElement(D,{className:"fadeInto",slug:n,returnTable:e=>T(e),columns:z,data:$&&((f=u==null?void 0:u.pages)==null?void 0:f.flatMap(e=>e??[]))},S?a.createElement(p,{center:!0},`${d.videoid} “${S.videoid}”`," ",i("has been deleted.")):null,a.createElement("button",{ref:F},k?"Loading more...":x)))}export{G as default};
