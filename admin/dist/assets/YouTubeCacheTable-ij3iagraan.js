import{r as F,R as a,L as M}from"../main-ij3iagraan.js";import{u as P,a as y,b as L,T as m,S as O,M as A,c as D}from"./useTableUpdater-ij3iagraan.js";import{C as J,S as B}from"./datepicker-ij3iagraan.js";import"./useMutation-ij3iagraan.js";function G({slug:d}){var E;const u="videoid",{table:g,setTable:S,filters:l,setFilters:T,sortingColumn:b,sortBy:w}=P({slug:d}),p=F.useMemo(()=>`${l}${b}`,[l,b]),{__:i,columnHelper:s,data:h,status:N,isSuccess:V,isFetchingNextPage:C,hasNextPage:I,ref:$}=y({key:d,url:p,pageId:u}),{row:f,selectRow:k,deleteRow:x,updateRow:R}=L({data:h,url:p,slug:d,pageId:u}),_={N:i("New"),A:i("Available"),P:i("Processing"),D:i("Disabled")},n={thumb:i("Thumbnail"),videoid:i("YouTube Id"),status:i("Status"),title:i("Title"),published:i("Published")},z=[s.accessor("check",{className:"checkbox",cell:e=>a.createElement(J,{checked:e.row.getIsSelected(),onChange:t=>{k(t,e)}}),header:null}),s==null?void 0:s.accessor(e=>{var t,r;return(r=(t=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:t.items[0])==null?void 0:r.snippet},{id:"thumb",className:"thumbnail",tooltip:e=>{var t,r,o,c;return a.createElement(m,null,a.createElement("img",{src:(o=(r=(t=e.getValue())==null?void 0:t.thumbnails)==null?void 0:r.high)==null?void 0:o.url,alt:(c=e==null?void 0:e.getValue())==null?void 0:c.title}))},cell:e=>{var t,r,o,c;return a.createElement("img",{src:(o=(r=(t=e==null?void 0:e.getValue())==null?void 0:t.thumbnails)==null?void 0:r.high)==null?void 0:o.url,alt:(c=e==null?void 0:e.getValue())==null?void 0:c.title})},header:n.thumb,size:80}),s==null?void 0:s.accessor("videoid",{header:n.videoid,size:80}),s==null?void 0:s.accessor("status",{className:"nolimit",cell:e=>a.createElement(B,{items:_,name:e.column.id,checkedId:e.getValue(),onChange:t=>R({newVal:t,cell:e})}),header:n.status,size:80}),s==null?void 0:s.accessor(e=>{var t,r,o;return[e==null?void 0:e.videoid,(o=(r=(t=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:t.items[0])==null?void 0:r.snippet)==null?void 0:o.title]},{id:"title",tooltip:e=>a.createElement(m,null,e.getValue()[1]),cell:e=>a.createElement("a",{href:`https://youtu.be/${e==null?void 0:e.getValue()[0]}`,target:"_blank",rel:"noreferrer"},e==null?void 0:e.getValue()[1]),header:n.title,size:450}),s==null?void 0:s.accessor(e=>{var t,r,o;return(o=(r=(t=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:t.items[0])==null?void 0:r.snippet)==null?void 0:o.publishedAt},{id:"published",cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:n.published,size:100}),s.accessor("delete",{className:"deleteRow",cell:e=>a.createElement(O,{onClick:()=>x({cell:e})}),header:null})];return N==="loading"?a.createElement(M,null):a.createElement(a.Fragment,null,a.createElement(A,{slug:d,header:n,table:g,noImport:!0,onSort:e=>w(e),onFilter:e=>T(e),exportOptions:{url:d,filters:l,fromId:`from_${u}`,pageId:u,deleteCSVCols:[u,"dest_url_id"]}}),a.createElement(D,{className:"fadeInto",slug:d,returnTable:e=>S(e),columns:z,data:V&&((E=h==null?void 0:h.pages)==null?void 0:E.flatMap(e=>e??[]))},f?a.createElement(m,{center:!0},`${n.videoid} “${f.videoid}”`," ",i("has been deleted.")):null,a.createElement("button",{ref:$},C?"Loading more...":I)))}export{G as default};
