import{r as k,R as t,L as I}from"../main-p2mcnpce44.js";import{u as N,a as _,b as L,T as n,S as $,M as z,c as M}from"./useTableUpdater-p2mcnpce44.js";import{C as y}from"./datepicker-p2mcnpce44.js";import"./useMutation-p2mcnpce44.js";function v({slug:a}){var p;const o="url_id",{table:h,setTable:f,filters:i,setFilters:E,sortingColumn:u,sortBy:g}=N({slug:a}),d=k.useMemo(()=>`${i}${u}`,[i,u]),{__:s,columnHelper:r,data:c,status:b,isSuccess:S,isFetchingNextPage:C,hasNextPage:V,ref:w}=_({key:a,url:d,pageId:o}),{row:m,selectRow:R,deleteRow:T}=L({data:c,url:d,slug:a,pageId:o}),l={url:s("URL"),cnt:s("Visits"),created:s("First Visit"),updated:"Last Visit"},x=[r.accessor("check",{className:"nolimit checkbox",cell:e=>t.createElement(y,{checked:e.row.getIsSelected(),onChange:F=>{R(F,e)}}),header:null}),r.accessor("url",{tooltip:e=>t.createElement(n,null,e.getValue()),header:l.url,minSize:300}),r.accessor("cnt",{tooltip:e=>t.createElement(n,null,e.getValue()),header:l.cnt,minSize:50}),r.accessor("created",{tooltip:e=>t.createElement(n,null,e.getValue()),header:l.created,minSize:100}),r.accessor("updated",{tooltip:e=>t.createElement(n,null,e.getValue()),header:l.updated,minSize:100}),r.accessor("delete",{className:"deleteRow",cell:e=>t.createElement($,{onClick:()=>T({cell:e})}),header:null})];return b==="loading"?t.createElement(I,null):t.createElement(t.Fragment,null,t.createElement(z,{slug:a,header:l,table:h,onSort:e=>g(e),onFilter:e=>E(e),onClearRow:e=>e,exportOptions:{url:a,filters:i,fromId:`from_${o}`,pageId:o,deleteCSVCols:[o,"dest_url_id"]}}),t.createElement(M,{className:"fadeInto",slug:a,returnTable:e=>f(e),columns:x,data:S&&((p=c==null?void 0:c.pages)==null?void 0:p.flatMap(e=>e??[]))},m?t.createElement(n,{center:!0},`${l.url} “${m.url}”`," ",s("has been deleted.")):null,t.createElement("button",{ref:w},C?"Loading more...":V)))}export{v as default};
