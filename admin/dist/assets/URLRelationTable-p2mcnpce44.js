import{r as F,R as t,L as N}from"../main-p2mcnpce44.js";import{u as v,a as M,b as q,T as p,S as z,M as P,c as $}from"./useTableUpdater-p2mcnpce44.js";import{C as B,I as m}from"./datepicker-p2mcnpce44.js";import"./useMutation-p2mcnpce44.js";function j({slug:r}){var f;const l="src_url_id",{table:g,setTable:b,rowToInsert:s,setInsertRow:c,filters:d,setFilters:E,sortingColumn:h,sortBy:C}=v({slug:r}),i=F.useMemo(()=>`${d}${h}`,[d,h]),{__:u,columnHelper:n,data:o,status:R,isSuccess:V,isFetchingNextPage:w,hasNextPage:I,ref:S}=M({key:r,url:i,pageId:l}),{row:T,selectRow:k,deleteRow:x,updateRow:U}=q({data:o,url:i,slug:r,pageId:l}),a={src_url_name:u("Source URL"),dest_url_name:u("Destination URL"),pos:u("Position")},L={src_url_name:t.createElement(m,{liveUpdate:!0,type:"url",defaultValue:"",label:a.src_url_name,onChange:e=>c({...s,src_url_name:e}),required:!0}),dest_url_name:t.createElement(m,{liveUpdate:!0,type:"url",defaultValue:"",label:a.dest_url_name,onChange:e=>c({...s,dest_url_name:e}),required:!0}),pos:t.createElement(m,{liveUpdate:!0,type:"number",defaultValue:"0",min:"0",max:"255",label:a.pos,onChange:e=>c({...s,pos:e}),required:!0})},y=[n.accessor("check",{className:"checkbox",cell:e=>t.createElement(B,{checked:e.row.getIsSelected(),onChange:_=>{k(_,e)}}),header:null}),n.accessor("src_url_name",{tooltip:e=>t.createElement(p,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:a.src_url_name,size:400}),n.accessor("dest_url_name",{tooltip:e=>t.createElement(p,null,e.getValue()),cell:e=>t.createElement("a",{href:e.getValue(),target:"_blank",rel:"noreferrer"},e.getValue()),header:a.dest_url_name,size:400}),n.accessor("pos",{className:"nolimit",cell:e=>t.createElement(m,{type:"number",defaultValue:e.getValue(),onChange:_=>U({newVal:_,cell:e,optionalSelector:"dest_url_id"})}),header:a.pos,size:80}),n.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(z,{onClick:()=>x({cell:e,optionalSelector:"dest_url_id"})}),header:null})];return R==="loading"?t.createElement(N,null):t.createElement(t.Fragment,null,t.createElement(P,{slug:r,header:a,table:g,onSort:e=>C(e),onFilter:e=>E(e),onClearRow:e=>e&&c(),insertOptions:{inserterCells:L,title:"Add related article",data:o,slug:r,url:i,pageId:l,rowToInsert:s},exportOptions:{url:r,filters:d,fromId:`from_${l}`,pageId:l,deleteCSVCols:[l,"dest_url_id"]}}),t.createElement($,{className:"fadeInto",slug:r,returnTable:e=>b(e),columns:y,data:V&&((f=o==null?void 0:o.pages)==null?void 0:f.flatMap(e=>e??[]))},T?t.createElement(p,{center:!0},u("URL has been deleted.")):null,t.createElement("button",{ref:S},w?"Loading more...":I)))}export{j as default};
