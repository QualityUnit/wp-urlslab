import{r as k,R as t,L as y}from"../main.js";import{u as z,a as F,h as R,T as o,S as L,M as N,b as M}from"./useTableUpdater-d1cf60b0.js";import{C as q}from"./datepicker-a249e83b.js";import"./useMutation-2de0e287.js";function D({slug:l}){var m;const{table:g,setTable:h,filters:u,setFilters:p,currentFilters:E,sortingColumn:i,sortBy:f,row:b,deleteRow:x}=z({slug:l}),d=k.useMemo(()=>`${u}${i}`,[u,i]),n="generator_id",{__:r,columnHelper:a,data:c,status:w,isSuccess:S,isFetchingNextPage:C,hasNextPage:T,ref:V}=F({key:l,url:d,pageId:n,currentFilters:E,sortingColumn:i}),s={query:r("Query"),context:r("Context"),lang:r("Language code"),status:r("Status"),status_changed:r("Changed at"),results:r("Results")},_=[a.accessor("check",{className:"checkbox",cell:e=>t.createElement(q,{checked:e.row.getIsSelected(),onChange:I=>{R(I,e)}}),header:null}),a.accessor("query",{tooltip:e=>t.createElement(o,null,e.getValue()),header:s.query,size:500}),a.accessor("context",{tooltip:e=>t.createElement(o,null,e.getValue()),header:s.context,size:500}),a.accessor("lang",{tooltip:e=>t.createElement(o,null,e.getValue()),header:s.lang,size:500}),a.accessor("results",{tooltip:e=>t.createElement(o,null,e.getValue()),header:s.results,size:500}),a.accessor("status",{tooltip:e=>t.createElement(o,null,e.getValue()),header:s.status,size:500}),a.accessor("status_changed",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:s.status_changed,size:100}),a.accessor("delete",{className:"deleteRow",cell:e=>t.createElement(L,{onClick:()=>x({data:c,url:d,slug:l,cell:e,rowSelector:n})}),header:null})];return w==="loading"?t.createElement(y,null):t.createElement(t.Fragment,null,t.createElement(N,{slug:l,header:s,table:g,noImport:!0,onSort:e=>f(e),onFilter:e=>p(e),exportOptions:{url:l,filters:u,fromId:`from_${n}`,pageId:n,deleteCSVCols:[n,"generator_id"]}}),t.createElement(M,{className:"fadeInto",columns:_,returnTable:e=>h(e),data:S&&((m=c==null?void 0:c.pages)==null?void 0:m.flatMap(e=>e??[]))},b?t.createElement(o,{center:!0},r("Row has been deleted.")):null,t.createElement("button",{ref:V},C?"Loading more...":T)))}export{D as default};
