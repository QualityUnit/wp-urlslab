import{r as I,R as a,L as F}from"../main-8g3nba7g7t.js";import{u as M,a as L,b as V,T as g,S as $,M as P,c as y}from"./useTableUpdater-8g3nba7g7t.js";import{C as B,S as D}from"./datepicker-8g3nba7g7t.js";import"./useMutation-8g3nba7g7t.js";function G({slug:o}){var h;const l="url_id",{table:f,setTable:b,filters:i,setFilters:w,sortingColumn:u,sortBy:E}=M({slug:o}),d=I.useMemo(()=>`${i}${u}`,[i,u]),{__:s,columnHelper:t,data:n,status:S,isSuccess:p,isFetchingNextPage:C,hasNextPage:T,ref:k}=L({key:o,url:d,pageId:l}),{row:m,selectRow:z,deleteRow:N,updateRow:R}=V({data:n,url:d,slug:o,pageId:l}),_={N:s("New"),A:s("Available"),P:s("Processing"),D:s("Disabled")},r={url:s("URL"),status:s("Status"),status_changed:s("Status changed"),filesize:s("Filesize")},x=[t.accessor("check",{className:"checkbox",cell:e=>a.createElement(B,{checked:e.row.getIsSelected(),onChange:c=>{z(c,e)}}),header:null}),t==null?void 0:t.accessor("url",{tooltip:e=>a.createElement(g,null,e.getValue()),header:r.url,size:450}),t==null?void 0:t.accessor("status",{className:"nolimit",cell:e=>a.createElement(D,{items:_,name:e.column.id,checkedId:e.getValue(),onChange:c=>R({newVal:c,cell:e})}),header:r.status,size:100}),t==null?void 0:t.accessor("status_changed",{cell:e=>new Date(e==null?void 0:e.getValue()).toLocaleString(window.navigator.language),header:r.status_changed,size:100}),t==null?void 0:t.accessor("filesize",{cell:e=>`${Math.round(e.getValue()/1024,0)} kB`,header:r.filesize,size:100}),t.accessor("delete",{className:"deleteRow",cell:e=>a.createElement($,{onClick:()=>N({cell:e})}),header:null})];return S==="loading"?a.createElement(F,null):a.createElement(a.Fragment,null,a.createElement(P,{slug:o,header:r,table:f,noExport:!0,noImport:!0,onSort:e=>E(e),onFilter:e=>w(e)}),a.createElement(y,{className:"fadeInto",columns:x,slug:o,returnTable:e=>b(e),data:p&&((h=n==null?void 0:n.pages)==null?void 0:h.flatMap(e=>e??[]))},m?a.createElement(g,{center:!0},`${r.url_name} “${m.url_name}”`," ",s("has been deleted.")):null,a.createElement("button",{ref:k},C?"Loading more...":T)))}export{G as default};
