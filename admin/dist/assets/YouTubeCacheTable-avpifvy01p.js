import{r as F,R as s,L as M}from"../main-avpifvy01p.js";import{u as P,a as y,b as z,T as b,S as L,M as O,c as A}from"./useTableUpdater-avpifvy01p.js";import{C as B}from"./datepicker-avpifvy01p.js";import"./useMutation-avpifvy01p.js";function q({slug:i}){var T;const c="videoid",{table:V,setTable:N,filters:h,setFilters:w,sortingColumn:m,sortBy:C}=P({slug:i}),p=F.useMemo(()=>`${h}${m}`,[h,m]),{__:o,columnHelper:t,data:l,status:S,isSuccess:g,isFetchingNextPage:I,hasNextPage:$,ref:k}=y({key:i,url:p,pageId:c}),{row:f,selectRow:x,deleteRow:R,updateRow:D}=z({data:l,url:p,slug:i,pageId:c}),E={N:o("New"),A:o("Available"),P:o("Processing"),D:o("Disabled")},d={thumb:o("Thumbnail"),videoid:o("YouTube Id"),status:o("Status"),title:o("Title"),published:o("Published")},_=[t.accessor("check",{className:"checkbox",cell:e=>s.createElement(B,{checked:e.row.getIsSelected(),onChange:a=>{x(a,e)}}),header:null}),t==null?void 0:t.accessor(e=>{var a,r;return(r=(a=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:a.items[0])==null?void 0:r.snippet},{id:"thumb",className:"thumbnail",tooltip:e=>{var a,r,n,u;return s.createElement(b,null,s.createElement("img",{src:(n=(r=(a=e.getValue())==null?void 0:a.thumbnails)==null?void 0:r.high)==null?void 0:n.url,alt:(u=e==null?void 0:e.getValue())==null?void 0:u.title}))},cell:e=>{var a,r,n,u;return s.createElement("img",{src:(n=(r=(a=e==null?void 0:e.getValue())==null?void 0:a.thumbnails)==null?void 0:r.high)==null?void 0:n.url,alt:(u=e==null?void 0:e.getValue())==null?void 0:u.title})},header:d.thumb,size:80}),t==null?void 0:t.accessor("videoid",{header:d.videoid,size:80}),t==null?void 0:t.accessor("status",{filterValMenu:E,cell:e=>E[e.getValue()],header:d.status,size:100}),t==null?void 0:t.accessor(e=>{var a,r,n;return[e==null?void 0:e.videoid,(n=(r=(a=JSON.parse(`${e==null?void 0:e.microdata}`))==null?void 0:a.items[0])==null?void 0:r.snippet)==null?void 0:n.title]},{id:"title",tooltip:e=>s.createElement(b,null,e.getValue()[1]),cell:e=>s.createElement("a",{href:`https://youtu.be/${e==null?void 0:e.getValue()[0]}`,target:"_blank",rel:"noreferrer"},e==null?void 0:e.getValue()[1]),header:d.title,size:450}),t.accessor("delete",{className:"deleteRow",cell:e=>s.createElement(L,{onClick:()=>R({cell:e})}),header:null})];return S==="loading"?s.createElement(M,null):s.createElement(s.Fragment,null,s.createElement(O,{slug:i,header:d,table:V,noImport:!0,onSort:e=>C(e),onFilter:e=>w(e),exportOptions:{url:i,filters:h,fromId:`from_${c}`,pageId:c,deleteCSVCols:[c,"dest_url_id"]}}),s.createElement(A,{className:"fadeInto",slug:i,returnTable:e=>N(e),columns:_,data:g&&((T=l==null?void 0:l.pages)==null?void 0:T.flatMap(e=>e??[]))},f?s.createElement(b,{center:!0},`${d.videoid} “${f.videoid}”`," ",o("has been deleted.")):null,s.createElement("button",{ref:k},I?"Loading more...":$)))}export{q as default};
